"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const base_1 = require("./base");
const encoder = new TextEncoder();
const decoder = new TextDecoder();
class Cache extends base_1.default {
    get(key) {
        return decoder.decode(this.getBytes(key));
    }
    getBytes(key) {
        const resultSize = this.env.cacheGet(key, this.ident);
        return this.ffiResult(resultSize);
    }
    set(key, value, ttl) {
        let bytes;
        if (typeof value === "string") {
            bytes = encoder.encode(value);
        }
        else {
            bytes = value;
        }
        this.env.cacheSet(key, bytes, ttl, this.ident);
    }
}
exports.default = Cache;
